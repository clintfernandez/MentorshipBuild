<!DOCTYPE html>
<html>
  <head>
    <title>Create Forum</title>
    <link href="style.css" rel="stylesheet" type="text/css" />
  </head>

  <body>
    
    <header>
      <img src="toplogo.png">
      <div class="navigation">
        <table>
          <tr>
            <td><a href="progress tracker/progressTracker.html">Onboarding Progress</a></td>
        </tr>
        <tr>
          <td><a href="questionnare.html">Find a Match</a></td>
        </tr>
        <tr>
            <td><a href="view_forums.html">Forums</a></td>
        </tr>
        <tr>
          <td><a href="review.html">Post</a></td>
        </tr>
        <tr>
            <td><a href="create_forum.html">Create Forum</a></td>
          </tr>
          <tr>
            <td><a href="viewProfile.html">Search User</a></td>
          </tr>
          <tr>
            <td><a href="request_mentor.html">Request Mentor</a></td>
          </tr>
          <tr>
            <td><a href="approve_request.html">Approve Request</a></td>
          </tr>
          <tr>
            <td><a href="create_account.html">Create Account</a></td>
          </tr>
        </table>
      </div>
    </header>


    <main>

      <div class="title">
        <h1>Mentorship App</h1>
        <p id="description_one"> <strong>Welcome!</strong> Type the title of a new forum you would like to create: </p>
      </div>

      <nav>
        <label for="title">Forum Name: </label><input type="text" id="title">
        <div id="center"><button onclick="createForum()" id="createForum">Create Forum</button></div>
      </nav>
    </main>


    <script src="https://mysqljs.com/mysql.js" type="text/javascript"></script>
    <script>
      
      function createForum() { 
        console.log("here");
        let title = document.getElementById("title").value

        let sqlSelect = "SELECT * FROM Forums WHERE title like \"" + title + "\";"
        let sqlStmt = "INSERT INTO Forums (Title) VALUES (\"" + title + "\");";
        console.log(sqlStmt);
            MySql.Execute( 
              "107.180.1.16", 
              "group62021",
              "2021group6",
              "group62021",

              sqlSelect,
              function (data){
                console.log(data);
                console.log("result length: "+ data.Result.length);
                if (data.Result.length < 1){
                  insertsql();
                }
                else {
                 alert("This email already in use");
                }
              }
              )
            function insertsql(){
              console.log(sqlStmt)
              MySql.Execute(
                "107.180.1.16", 
                "group62021",
                "2021group6",
                "group62021",

                sqlStmt
              )
      }
          }
    </script>
  </body>

</html>